# Gestion des processus et monitoring

**Surveiller et contr√¥ler vos entra√Ænements IA**

---

## Note importante

Les corrections d√©taill√©es des exercices pratiques sont disponibles dans le **repository GitHub du cours**, indiqu√© dans le document d‚Äôintroduction (section 0.1).

---

## Table des mati√®res

1. [Processus : concepts de base](#processus-base)
2. [Monitoring syst√®me](#monitoring-systeme)
3. [Gestion des processus](#gestion-processus)
4. [Sessions longues et arri√®re-plan](#sessions-longues)

---

## 1. Processus : concepts de base <a id="processus-base"></a>

### Th√©orie : qu‚Äôest-ce qu‚Äôun processus

Un **processus** est un programme en cours d‚Äôex√©cution.
En IA, un processus peut √™tre :

* un script Python qui entra√Æne un mod√®le,
* un Jupyter Notebook,
* un programme de pr√©paration de donn√©es.

Chaque processus est identifi√© par un **PID (Process ID)**.

---

### √âtats principaux

| √âtat             | Signification                                   |
| ---------------- | ----------------------------------------------- |
| **Running (R)**  | En cours d‚Äôex√©cution                            |
| **Sleeping (S)** | En attente d‚Äôune ressource (I/O, m√©moire)       |
| **Stopped (T)**  | Suspendu temporairement                         |
| **Zombie (Z)**   | Fini mais mal nettoy√© (rare pour les d√©butants) |

---

### Commandes essentielles

| Commande   | Description                           | Exemple           |               |
| ---------- | ------------------------------------- | ----------------- | ------------- |
| **ps**     | Liste vos processus                   | `ps`              |               |
| **ps aux** | Liste d√©taill√©e de tous les processus | \`ps aux          | grep python\` |
| **pgrep**  | Recherche un processus par nom        | `pgrep -l python` |               |

---

### Sch√©ma ASCII ‚Äî exemple d‚Äôun processus IA

```
python (train.py)
   ‚îî‚îÄ‚îÄ PID: 2451
       ‚îî‚îÄ‚îÄ Consomme CPU + RAM
```

---

### Exemple pratique

```bash
# Lister tous les processus en cours
ps aux

# Rechercher un processus Python sp√©cifique
ps aux | grep python
```

---

### Exercices pratiques (non corrig√©s)

**Exercice 1 : Exploration des processus**

* Listez vos processus avec `ps`.
* Trouvez ceux li√©s √† `python`.
* Notez leur PID.

---

## 2. Monitoring syst√®me <a id="monitoring-systeme"></a>

### Th√©orie : surveiller les ressources

Surveiller son syst√®me permet de v√©rifier que l‚Äôentra√Ænement utilise correctement **CPU, RAM et GPU**.

---

### Commandes essentielles

| Commande       | Description                                 | Usage IA                                  |
| -------------- | ------------------------------------------- | ----------------------------------------- |
| **top**        | Affiche l‚Äôutilisation CPU/RAM en temps r√©el | Voir si l‚Äôentra√Ænement prend toute la RAM |
| **htop**       | Version am√©lior√©e et color√©e de `top`       | Plus facile √† lire et trier               |
| **free -h**    | Affiche la m√©moire disponible               | Ajuster batch size                        |
| **nvidia-smi** | V√©rifie l‚Äôutilisation GPU (NVIDIA)          | Surveiller m√©moire GPU                    |

---

### Exemple pratique

```bash
# Affiche l‚Äôutilisation CPU et RAM
top

# Version plus lisible (√† installer si besoin)
htop

# Affiche la m√©moire disponible
free -h

# V√©rifie la m√©moire GPU
nvidia-smi
```

---

### Sch√©ma ASCII ‚Äî surveillance typique

```
[Terminal 1] ‚Üí htop   (CPU + RAM)
[Terminal 2] ‚Üí nvidia-smi (GPU)
```

---

### Exercices pratiques (non corrig√©s)

**Exercice 2 : Monitoring simple**

* Lancez `top` et observez les processus les plus gourmands.
* Ex√©cutez `free -h` et notez la RAM disponible.
* Si vous avez une carte NVIDIA, lancez `nvidia-smi` et observez l‚Äôutilisation GPU.

---

## 3. Gestion des processus <a id="gestion-processus"></a>

### Th√©orie : contr√¥ler un processus

Parfois, il faut **arr√™ter** un entra√Ænement ou le **mettre en pause**.

---

### Commandes essentielles

| Commande          | Description                        | Exemple        |
| ----------------- | ---------------------------------- | -------------- |
| **kill <PID>**    | Arr√™ter un processus proprement    | `kill 2451`    |
| **kill -9 <PID>** | Forcer l‚Äôarr√™t si bloqu√©           | `kill -9 2451` |
| **jobs**          | Voir les t√¢ches en arri√®re-plan    | `jobs`         |
| **fg %1**         | Ramener au premier plan la t√¢che 1 | `fg %1`        |
| **bg %1**         | Lancer la t√¢che 1 en arri√®re-plan  | `bg %1`        |

---

### Exemple pratique

```bash
# Lancer un script en arri√®re-plan
python train.py &

# Voir la liste des jobs
jobs

# Ramener un job au premier plan
fg %1
```

---

### Sch√©ma ASCII ‚Äî cycle simple d‚Äôun processus

```
[START] ‚Üí [Running] ‚Üí (kill) ‚Üí [Stopped]
```

---

### Exercices pratiques (non corrig√©s)

**Exercice 3 : Contr√¥le simple**

* Lancez un script Python en arri√®re-plan (`sleep 100 &`).
* Affichez la liste des jobs (`jobs`).
* Arr√™tez-le avec `kill`.

---

## 4. Sessions longues et arri√®re-plan <a id="sessions-longues"></a>

### Th√©orie : garder un entra√Ænement actif

Si vous vous d√©connectez, les processus li√©s au terminal s‚Äôarr√™tent.
Solution : utiliser **screen** ou **tmux**.

---

### Commandes essentielles (screen)

| Commande         | Description              |
| ---------------- | ------------------------ |
| **screen -S ia** | Cr√©er une session nomm√©e |
| **Ctrl+A, D**    | D√©tacher la session      |
| **screen -ls**   | Lister les sessions      |
| **screen -r ia** | Reprendre une session    |

---

### Exemple pratique

```bash
# Cr√©er une session screen
screen -S entrainement

# Lancer un script d‚Äôentra√Ænement
python train.py

# D√©tacher la session (Ctrl+A puis D)
# Reprendre plus tard
screen -r entrainement
```

---

### Sch√©ma ASCII ‚Äî usage d‚Äôune session

```
[Connexion SSH] ‚Üí [screen] ‚Üí [train.py en cours]
      ‚Üë
   D√©connexion
      ‚Üì
[Reconnexion SSH] ‚Üí [screen -r] ‚Üí [reprendre le travail]
```

---

### Exercices pratiques (non corrig√©s)

**Exercice 4 : Sessions persistantes**

* Cr√©ez une session `screen`.
* Lancez `sleep 120`.
* D√©tachez la session.
* Reconnectez-vous et reprenez la session.

---

## Conclusion

### Points cl√©s √† retenir

* **ps, top, htop** : observer les processus et ressources.
* **kill, jobs, fg, bg** : contr√¥ler vos scripts.
* **screen** : garder vos entra√Ænements longs actifs m√™me apr√®s d√©connexion.

### Comp√©tences acquises

Apr√®s ce module, vous savez :

* Identifier vos processus IA.
* Surveiller l‚Äôutilisation CPU, RAM et GPU.
* Lancer, arr√™ter, mettre en arri√®re-plan des scripts.
* Maintenir vos entra√Ænements actifs avec screen.

### Prochaine √©tape

üëâ Le module suivant abordera les **variables d‚Äôenvironnement et la configuration syst√®me**, indispensables pour pr√©parer vos environnements IA.


